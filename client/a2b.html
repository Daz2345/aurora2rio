<head>
  <title>Aurora 2 Rio</title>
  <link rel="icon" type="image/png" href="img/favicon.ico">
  <style type="text/css">
  
  .sunburst {
    margin-top: 60px;
    margin-bottom: 60px;
    margin-left: auto;
    margin-right: auto;
    width: 60%;
  }
    #explanation {
    position: relative;
    top: 330px;
    left: 305px;
    width: 140px;
    text-align: center;
    color: #666;
    z-index: -1;
  }
    .shadow {
      text-shadow: 2px 4px 3px rgba(0, 0, 0, 0.3);
    }
  
    .map {
      width: 100%;
      max-width: 100%;
      height: 60vh;
    }
    
    .ui.secondary.pointing.menu.noborder {
      border-width: 0px !important;
    }
    
    .logoIcons {
      max-height: 120px;
    }
    
    .goshIcons {
      max-height: 200px;
    }
    
    .rioIcons {
      max-height: 200px;
    }
    
    .logoBG {
      background-color: #4faa33;
    }
    
    .titleColor {
      color: #D7DF21 !important;
      text-decoration: underline;
      text-shadow: 2px 4px 3px rgba(0, 0, 0, 0.3);
    }
    
    .distanceColor {
      text-shadow: 2px 4px 3px rgba(0, 0, 0, 0.3);
    }
    
    .middlealignedcontent {
      text-align: middle;
    }
    
    .countdown {
      width: auto;
      display: inline-block;
    }
    
    .clock {
      width: auto;
      display: inline-block;
    }
    
    .centerText {
      text-align: center;
    }
    
    .hidden.menu {
      display: none;
    }
    
    div.ui.inverted.vertical.masthead.center.aligned.segment {
      background-image: url("/img/brazil.jpg");
      background-repeat: no-repeat;
      background-size: 100%;
    }
    
    .active.masthead.segment {
      min-height: 35vw;
      padding: 1em 0em;
    }
    
    .masthead.segment {
      min-height: 35vw;
      padding: 1em 0em;
    }
    
    .masthead .logo.item img {
      margin-right: 1em;
    }
    
    .masthead .ui.menu .ui.button {
      margin-left: 0.5em;
    }
    
    .masthead h1.ui.header {
      margin-top: 0.5em;
      margin-bottom: 0em;
      font-size: 6em;
      font-weight: normal;
    }
    
    .masthead h2 {
      font-size: 2.5em;
      font-weight: normal;
    }
    
    .ui.vertical.stripe {
      padding: 8em 0em;
    }
    
    .ui.vertical.stripe h3 {
      font-size: 2em;
    }
    
    .ui.vertical.stripe .button+ h3,
    .ui.vertical.stripe p+ h3 {
      margin-top: 3em;
    }
    
    .ui.vertical.stripe .floated.image {
      clear: both;
    }
    
    .ui.vertical.stripe p {
      font-size: 1.33em;
    }
    
    .ui.vertical.stripe .horizontal.divider {
      margin: 3em 0em;
    }
    
    .quote.stripe.segment {
      padding: 0em;
    }
    
    .quote.stripe.segment .grid .column {
      padding-top: 5em;
      padding-bottom: 5em;
    }
    
    .footer.segment {
      padding: 5em 0em;
    }
    
    .secondary.pointing.menu .toc.item {
      display: none;
    }
    
    body.pushable {
      background: '#fff' !important;
    }
    
    @media only screen and (max-width: 700px) {
      .ui.fixed.menu {
        display: none !important;
      }
      .secondary.pointing.menu .item,
      .secondary.pointing.menu .menu {
        display: none;
      }
      .secondary.pointing.menu .toc.item {
        display: block;
      }
      .masthead.segment {
        min-height: 250px;
      }
      .masthead h1.ui.header {
        font-size: 3em;
        margin-top: 1.0em;
      }
      .masthead h2 {
        margin-top: 0.5em;
        font-size: 1.5em;
      }
      .logoIcons {
        max-height: 60px;
      }
      .rioIcons {
        max-height: 60px;
      }
      .goshIcons {
        max-height: 60px;
      }
      .clock {
        display: hidden;
      }
      .pusher {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }
      .pusher> .footer {
        flex: 1;
      }
    }
  </style>

</head>

<body class="pushable Site">

</body>

<template name="mainLayout">
  
  <!-- Sidebar Menu -->
  <div class="ui vertical inverted sidebar menu left">
    <a class="{{isActiveRoute 'home'}} item" href="{{pathFor '/'}}">Home</a> 
    {{#if currentUser}}
      <a class="{{isActiveRoute 'feed'}} item" href="{{pathFor 'feed'}}">Activity Feed</a>
      <!--<a class="{{isActiveRoute 'teams'}} item" href="{{pathFor 'teams'}}">Teams</a>      -->
      <a class="{{isActiveRoute 'leaderboard'}} item" href="{{pathFor 'leaderboard'}}">Leaderboard</a> 
      <a class="{{isActiveRoute 'journey'}} item" href="{{pathFor 'journey'}}">Journey</a> 
      <a class="{{isActiveRoute 'settings'}} item" href="{{pathFor 'settings'}}">Settings</a>      
    {{/if}}
    {{ > login}}
  </div>
  
  <!-- Following Menu -->
  <div class="ui large top fixed hidden menu">
    <div class="ui container">
      <a class="{{isActiveRoute 'home'}} item" href="{{pathFor '/'}}">Home</a>
      {{#if currentUser}}
        <a class="{{isActiveRoute 'feed'}} item" href="{{pathFor 'feed'}}">Activity Feed</a>
        <!--<a class="{{isActiveRoute 'teams'}} item" href="{{pathFor 'teams'}}">Teams</a>        -->
        <a class="{{isActiveRoute 'leaderboard'}} item" href="{{pathFor 'leaderboard'}}">Leaderboard</a> 
        <a class="{{isActiveRoute 'journey'}} item" href="{{pathFor 'journey'}}">Journey</a>  
        <a class="{{isActiveRoute 'settings'}} item" href="{{pathFor 'settings'}}">Settings</a>          
      {{/if}}
      {{ >login}}
    </div>
  </div>
  
  <!-- Page Contents -->
  <div class="pusher">
    {{>top }}
    <main class="Site-content">
      {{>Template.dynamic template=content}}
    </main>
    {{> footer}}
  </div>

</template>

<template name="activityFeed">
  {{#if currentUser}}
    <div class="ui container">
      <h1>Activity feed</h1>
      {{> reactiveTable collection=activities fields=fields}}
    </div>
  {{/if}}
</template>

<template name="top">
  <div class="ui {{isActiveRoute 'home'}} inverted vertical masthead center aligned segment">
    <div class="ui container">
      <div class="ui large secondary inverted pointing menu noborder">
        <a class="toc item">
          <i class="sidebar icon"></i>
        </a>
        <a class="{{isActiveRoute 'home'}} item" href="{{pathFor '/'}}">Home</a>
        {{#if currentUser}}
          <a class="{{isActiveRoute 'feed'}} item" href="{{pathFor 'feed'}}">Activity Feed</a>
          <!--<a class="{{isActiveRoute 'teams'}} item" href="{{pathFor 'teams'}}">Teams</a>-->
          <a class="{{isActiveRoute 'leaderboard'}} item" href="{{pathFor 'leaderboard'}}">Leaderboard</a> 
          <a class="{{isActiveRoute 'journey'}} item" href="{{pathFor 'journey'}}">Journey</a>       
          <a class="{{isActiveRoute 'settings'}} item" href="{{pathFor 'settings'}}">Settings</a>            
        {{/if}}          
        {{ >login}}
      </div>
      <div class="ui text container">
        <h1 class="ui inverted header titleColor">
          Aurora 2 Rio
        </h1>
      </div>
      {{#if currentUser}}
        {{ > countdown}}
      {{/if}}
    </div>
  </div>
</template>

<template name="countdown">
  <div class="ui vertical stripe quote segment">
    <div class="ui text container">
      <h2 class="ui header center inverted align shadow">Only</h2>
    </div>
    <div class="centerText">
      <div class="countdown"></div>
    </div>
    <div class="ui text container">
      <h2 class="ui header center inverted align shadow">Km To Go!</h2>
    </div>
  </div>  
</template>

<template name="homeContent">
  <div class="ui vertical stripe quote segment">
    <div class="ui equal width internally celled stackable grid">
      <div class="center aligned row">
        <div class="column logoBG">
          <img class="logoIcons" src="img/big-sw.png" />
        </div>
        <div class="column logoBG">
          <img class="logoIcons" src="img/big-cr.png" />
        </div>
        <div class="column logoBG">
          <img class="logoIcons" src="img/big-at.png" />
        </div>        
      </div>
    </div>
  </div>  

  <div class="ui vertical segment">
    <div class="ui text container">
      <h3>So we're leaving Aurora House but were going all the way to Rio!</h3>    
      <p>Collectively we are going to Swim, Bike and Run all the way to Rio in Brazil for the start of the olympics</p>
      <p>This is a fantastic opportunity to raise money for <strong>Great Ormond Street Hospital</strong> our helping hands charity of the year!</p>
      <p>Plus get ready for this summers olympics in Rio, Brazil</p>
      
      {{#if currentUser}}
        <h3 class="ui header">Submit Activity Manually</h3>
        <form id="activityForm" class="ui form activity submit" autocomplete="off">
            <div class="ui three column grid">
                <div class="column">
                    <div class="field">
                        <label>Distance (in metres)</label>
                        <input type="number" name="distance" required=true min="0" placeholder="How far did you go?">
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label>Activity Type</label>
                        <select name="type" placeholder="Activity Type" class="ui fluid floating dropdown">
                            <option value="" disabled selected>Activity Type</option>
                            <option class="item" data-value="Swim">Swim</option>
                            <option class="item" data-value="Ride">Ride</option>
                            <option class="item" data-value="Run">Run</option>
                        </select>                          
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label>Country</label>
                        <input name="country" type="text">
                    </div>
                </div>                  
            </div>
            <div class="actions">
                <div class="ui positive right labeled icon button submitActivity"><i class="checkmark icon"></i>Submit Activity</div>
            </div>              
        </form>
      {{ else}}
        <h3 class="ui header">After signing in / joining, you can record your activities automatically via Strava or input them manually</h3>
      {{/if}}
    </div>
  </div>

  <div class="ui vertical quote segment">
    <div class="ui equal width stackable internally celled grid">
      <div class="center aligned row">
        <div class="column">
          <a href="http://www.gosh.org/" target="_blank" class="item">
            <img class="goshIcons" src="img/charity-great-ormond-street.png" />
          </a>
        </div>
        <div class="column">
          <a href="https://www.rio2016.com/en" target="_blank" class="item">
              <img class="rioIcons" src="img/Rio2016-LogoFORMATTED.jpg"/>
          </a>
        </div>
      </div>
      <div class="center aligned row">
        <div class="column">
          <div class="clock"></div> 
        </div>  
      </div>
    </div>
  </div>
</template>

<template name="footer">
  <div class="ui inverted vertical footer segment">
    <div class="ui container">
      <div class="ui stackable inverted divided equal height stackable grid">
        <div class="six wide column">
          <img src="https://www.dunnhumby.com/sites/all/themes/dunnhumby/images/logo.png" />
        </div>
        <div class="ten wide column">
          <h4 class="ui inverted header">Aurora to Rio</h4>
          <p>Join us on the journey to Rio and raise money for an amazing charity.</p>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="mapView">
  <div id="map"></div>
</template>

<template name="map">  
  <div class="map">
    {{> googleMap name="map" options=mapOptions}}
  </div>
</template>



<template name="leaderboard">
  {{#if currentUser}}
    <div class="ui container">
      <div class="ui tabular menu">
        <div class="item active" data-tab="Individual">Individual</div>
        <div class="item" data-tab="Team">Team</div>
      </div>
      <div class="ui tab active" data-tab="Individual">
        {{ > leaderboardIndividual}}
      </div>
      <div class="ui tab" data-tab="Team">
        {{ > leaderboardTeam}}
      </div>
      <div class="sunburst">
        {{ > sunburst}}
      </div>
    </div>
  {{/if}}
</template>

<template name="leaderboardTeam">
  {{> reactiveTable collection=teams fields=fields}}
</template>

<template name="leaderboardIndividual">
  {{> reactiveTable collection=individuals fields=fields}}  
</template>

<template name="login">
  {{#if currentUser}}
    {{ > logoutbutton}}
  {{else}}
    <a href="{{pathFor 'signin'}}" class="right item">Sign In</a>
  {{/if}}
</template>

<template name="Auth_page">
  <div class="ui container">  
    {{ > atForm }}
  </div>
</template>

<template name="logoutbutton">
  <a href="{{pathFor 'home'}}" class="right item logout">{{currentUser.profile.fullName}} - Logout</a>
</template>

<template name="userProfile">
  <form class="ui form" id="profileForm" >
    

      <div class="field">
        <label>First Name</label>
        <input type="text" name="firstName" placeholder="First Name" value="{{firstName}}">
      </div>
      <div class="field">
        <label>Last Name</label>
        <input type="text" name="lastName" placeholder="Last Name" value="{{lastName}}">
      </div>  

      <div class="field">
        <label>Team Name</label>
        <select name="team" placeholder="Team Name" class="ui fluid search floating dropdown similar">
              <option value="" disabled selected>Select your Team</option>          
              {{#each teams}}
                <option class="item" data-value="{{_id}}">{{name}}</option>
              {{/each}}
        </select>
      </div>

      <div class="actions">
          <div class="ui primary button submitProfile">Update Profile</div>
      </div>      

  </form>
</template>

<template name="settings">
  {{#if currentUser}}  
    <div class="ui container">  
      <div class="ui tabular menu">
        <div class="item active" data-tab="Individual">Individual</div>
        <div class="item" data-tab="Teams">Teams</div>
      </div>
      <div class="ui tab active" data-tab="Individual">    
        <h1>Profile</h1>
        Name: <h1>{{currentUser.profile.fullName}}</h1>
        Team: <h1>{{team}}</h1>
        {{> userProfile}}
      </div>    

      <div class="ui tab" data-tab="Teams">    
        <h3 class="ui header">Create New Team</h3>          
        <form id="newTeam" class="ui form team submit" autocomplete="off">
            <div class="ui grid">
                <div class="four wide column">
                    <div class="field">
                        <label>Team</label>
                        <input type="text" name="teamName" required=true placeholder="Team Name">
                    </div>
                </div>          
                <div class="twelve wide column">
                    <div class="field">
                        <label>Link to sponsorship page</label>
                        <input type="text" name="sponsorLink" required=true>
                    </div>
                </div>          
            </div>
            <div class="actions">
                <div class="ui positive right labeled icon button submitTeam"><i class="checkmark icon"></i>Create Team</div>
            </div>       
        </form>  
      {{> reactiveTable collection=teams}}        
      </div>
    </div>    
  {{/if}}      
</template>